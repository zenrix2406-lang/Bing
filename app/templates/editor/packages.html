{% extends "base.html" %}
{% block title %}Installed Packages â€” PyHost{% endblock %}

{% block content %}
<div class="d-flex align-items-center justify-content-between mb-4">
  <h4 class="fw-bold mb-0">
    <i class="bi bi-box-seam me-2 text-info"></i>Installed Python Packages
  </h4>
  <a href="{{ url_for('editor.index') }}" class="btn btn-outline-secondary btn-sm">
    <i class="bi bi-arrow-left me-1"></i>Back to Editor
  </a>
</div>

<div class="mb-3">
  <input type="text" id="pkg-search" class="form-control bg-dark border-secondary text-white"
         placeholder="ðŸ” Search packagesâ€¦">
</div>

<div class="card bg-dark border-secondary">
  <div class="card-body p-0">
    <table class="table table-dark table-hover table-sm mb-0" id="pkg-table">
      <thead class="table-secondary">
        <tr>
          <th class="ps-3">Package</th>
          <th>Version</th>
        </tr>
      </thead>
      <tbody>
        {% for pkg in packages %}
        <tr>
          <td class="ps-3 font-monospace">{{ pkg.name }}</td>
          <td class="text-secondary font-monospace">{{ pkg.version }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="card-footer text-secondary small py-2">
    {{ packages|length }} packages installed
  </div>
</div>

<script>
document.getElementById('pkg-search').addEventListener('input', function() {
  const q = this.value.toLowerCase();
  document.querySelectorAll('#pkg-table tbody tr').forEach(row => {
    row.style.display = row.textContent.toLowerCase().includes(q) ? '' : 'none';
  });
});
</script>
{% endblock %}
